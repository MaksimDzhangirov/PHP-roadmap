# Дорожная карта для изучения Docker

[Оригинал](https://roadmap.sh/docker)

Дорожная карта была составлена в сотрудничестве с [Сидом Паласом (Sid Palas)](https://twitter.com/sidpalas). Ознакомьтесь с его
[бесплатным курсом, подробно освещающим эту тему](https://courses.devopsdirective.com/docker-beginner-to-pro).

[Дорожная карта для изучения Kubernetes](https://roadmap.sh/kubernetes)

[Дорожная карта DevOps](https://roadmap.sh/devops)

[Дорожная карта Backend-разработчика](https://roadmap.sh/backend)

Необходимые предварительные знания для изучения данного материала:

* из области веб-разработки
  * архитектура приложения
  * языки программирования
* основ Linux
  * менеджеры пакетов
  * права доступа для пользователей/групп
  * команды оболочки командной строки
  * скрипты оболочки командной строки
 
## Введение

**Что такое Docker?**

Docker – это платформа с открытым исходным кодом, которая автоматизирует развертывание, масштабирование и управление приложениями, изолируя их в легковесные портативные контейнеры. Контейнеры – это автономные исполняемые модули, которые инкапсулируют все необходимые зависимости, библиотеки и файлы конфигурации, необходимые для единообразной работы приложения в различных средах.

### Что такое контейнеры?

Контейнеры – это легковесные, портативные и изолированные программные среды, которые позволяют разработчикам запускать и упаковывать приложения с их зависимостями единообразно на разных платформах. Они помогают оптимизировать процессы разработки, развертывания и управления приложениями, обеспечивая при этом единообразную работу приложений независимо от базовой инфраструктуры.

#### Как работают контейнеры?

В отличие от традиционной виртуализации, которая эмулирует всю операционную систему с ее аппаратными ресурсами, контейнеры совместно используют ядро ОС хоста и упрощенные методы виртуализации для создания изолированных процессов. Такой подход дает ряд преимуществ, в том числе:

* **Эффективность**: контейнеры требуют меньше накладных расходов и могут совместно использовать общие библиотеки и исполняемые файлы, что позволяет запускать больше контейнеров на одном хосте по сравнению с виртуальными машинами (ВМ).
* **Переносимость**: контейнеры инкапсулируют приложения и их зависимости, поэтому их можно легко перемещать и единообразно запускать в разных средах и платформах.
* **Быстрый запуск**: поскольку контейнерам не требуется загрузка полной ОС, они могут запускаться и завершать работу гораздо быстрее, чем виртуальные машины.
* **Единообразность**: контейнеры обеспечивают единообразную среду для этапов разработки, тестирования и продакшена приложения, уменьшая проблему «оно работает на моей машине».

#### Контейнеры и Docker

Docker – это платформа, которая упрощает процесс создания, развертывания и управления контейнерами. Она предоставляет разработчикам и администраторам набор инструментов и API для управления контейнерными приложениями. С помощью Docker вы можете создавать и упаковывать код приложения, библиотеки и зависимости в образ контейнера, который можно распространять и единообразно запускать в любой среде, поддерживающей Docker.

Полезные ссылки:

* [What is a container?](https://www.docker.com/resources/what-container/)

### Зачем нам нужны контейнеры?

В мире разработки и развертывания программного обеспечения решающее значение имеют единообразность и эффективность. До того, как появились контейнеры, разработчики часто сталкивались с проблемами при развертывании приложений в различных средах, в том числе:

* **Несовместимые среды**: разработчики часто работают в разных средах, которые могут иметь разные конфигурации и библиотеки по сравнению с продакшен серверами. Это приводит к проблемам совместимости при развертывании приложений.

* **Неэффективное использование ресурсов**: виртуальные машины (ВМ) широко использовались для устранения несовместимости среды. Однако виртуальные машины требуют, чтобы для каждого приложения работала целая ОС, что приводит к неэффективному использованию ресурсов.

* **Проблемы, связанные с медленным процессом внедрения и масштабируемостью**: традиционным методам развертывания требуется больше времени до выпуска решения на рынок и их трудно масштабировать, что затрудняет быстрое внедрение обновлений программного обеспечения.

Как контейнеры решают эти проблемы:

* **Единообразная среда**: контейнеры устраняют несогласованность среды, объединяя приложение и его зависимости, конфигурации и библиотеки в один контейнер. Это гарантирует бесперебойную работу приложения в различных средах.

* **Эффективное использование ресурсов**. В отличие от виртуальных машин, контейнеры совместно используют базовые системные ресурсы и ядро ОС, что делает их легковесными и эффективными. Контейнеры создавались таким образом, чтобы использовать меньшее количество ресурсов и для более быстрой загрузки, что улучшает использование ресурсов.

* **Ускорение процесса внедрения и масштабируемость**. Контейнеры можно легко создавать, уничтожать и заменять, что приводит к ускорению циклов разработки и развертывания. Масштабирование приложений упрощается, поскольку можно развернуть несколько контейнеров без потребления значительных ресурсов.

В целом контейнеры стали важным инструментом для организаций, которые хотят быстро реагировать на изменения рынка, повышать эффективность использования ресурсов и обеспечивать надежную и единообразную доставку программного обеспечения. Они произвели революцию в современной практике разработки программного обеспечения и оказали долгосрочное влияние на мир развертывания и управления приложениями.

Полезные ссылки:

* [Introduction to containers - AWS Skill Builder](https://explore.skillbuilder.aws/learn/course/106/introduction-to-containers)

### Bare Metal, виртуальные машины и контейнеры

Вот краткий обзор различий между bare metal, виртуальными машинами и контейнерами.

#### Bare Metal

Bare Metal («голое железо») – это термин, используемый для описания компьютера, который работает непосредственно на оборудовании без какой-либо виртуализации. Это наиболее производительный способ запуска приложения, но он также и наименее гибкий. Вы можете запускать только одно приложение на каждом сервере и вы не можете легко переместить приложение на другой сервер.

#### Виртуальные машины

Виртуальные машины (ВМ) – это способ запуска нескольких приложений на одном сервере. Каждая виртуальная машина работает поверх гипервизора – программного обеспечения, эмулирующего аппаратное обеспечение компьютера. Гипервизор позволяет запускать несколько операционных систем на одном сервере, а также обеспечивает изоляцию между приложениями, работающими на разных виртуальных машинах.

#### Контейнеры

Контейнеры – это способ запуска нескольких приложений на одном сервере без затрат на гипервизор. Каждый контейнер работает поверх механизма контейнера, который представляет собой часть программного обеспечения, эмулирующую операционную систему компьютера. Механизм контейнеров позволяет запускать несколько приложений на одном сервере, а также обеспечивает изоляцию между приложениями, работающими в разных контейнерах.

Полезные ссылки:

* [History of Virtualization](https://courses.devopsdirective.com/docker-beginner-to-pro/lessons/01-history-and-motivation/03-history-of-virtualization)

### Docker и OCI

[Open Container Initiative (OCI)](https://opencontainers.org/) – это проект Linux Foundation, целью которого является создание отраслевых стандартов для форматов контейнеров и сред выполнения. Его основная цель – обеспечить совместимость и взаимодействие контейнерных сред посредством определенных технических спецификаций.

#### Роль Docker в OCI

[Docker](https://www.docker.com/) является одним из основателей OCI и сыграл ключевую роль в формировании стандартов форматов контейнеров и сред выполнения. Docker изначально разработал среду выполнения контейнера (Docker Engine) и формат образа (Docker Image), которые служат основой для спецификаций OCI.

#### Спецификации OCI

OCI имеет две основные спецификации:

* **Спецификация среды выполнения (runtime-spec)**: определяет спецификацию среды выполнения контейнера с помощью технологии изоляции, например, механизма контейнера. Среда выполнения контейнера, созданная Docker и называемая «containerd», послужила основой для разработки OCI runtime-spec.
* **Спецификация образа (image-spec)**: определяет формат образа контейнера, который описывает содержимое контейнера и может запускаться совместимой средой выполнения. Первоначальный формат образа Docker привел к созданию OCI image-spec.

#### Совместимость между Docker и OCI

Docker сохраняет приверженность к поддержке спецификаций OCI и с момента своего участия в OCI постоянно обновляет свое программное обеспечение, чтобы оно соответствовало стандартам OCI. Среда выполнения контейнера и формат образа Docker полностью совместимы со спецификациями OCI, что позволяет запускать контейнеры Docker другими средами выполнения контейнеров, совместимыми с OCI, и наоборот.

Таким образом, Docker и Open Container Initiative работают сообща, чтобы поддерживать стандартизацию и совместимость в контейнерной индустрии. Docker сыграл значительную роль в разработке спецификаций OCI, гарантируя, что экосистема контейнеров останется работоспособной, функциональной и доступной для широкого круга пользователей и платформ в отрасли.

## Технологии, лежащие в основе

Достаточно иметь общее представление о них.

Понимание основных технологий, лежащих в основе Docker, даст вам более глубокое осмысление того, как работает Docker, и поможет вам более эффективно использовать платформу.

#### Контейнеры Linux (LXC)

Контейнеры Linux (LXC) служат основой Docker. LXC – это легковесное решение для виртуализации, которое позволяет нескольким изолированным системам Linux работать на одном хосте без необходимости использования полноценного гипервизора. LXC эффективно изолирует приложения и их зависимости безопасным и оптимизированным способом.

#### Контрольные группы (cgroups)

Контрольные группы (cgroups) – это функция ядра Linux, которая позволяет распределять и управлять такими ресурсами, как ЦП, память и ввод-вывод, набору процессов. Docker использует контрольные группы, чтобы ограничить ресурсы, используемые контейнерами, и гарантировать, что один контейнер не монополизирует ресурсы хост-системы.

#### Файловые системы типа Union

UnionFS – это служба файловой системы, которая позволяет накладывать несколько файловых систем, формируя единое унифицированное представление. Docker использует UnionFS для создания многоуровневого подхода к образам и контейнерам, что обеспечивает лучший обмен общими файлами и более быстрое создание контейнеров.

#### Пространства имён

Пространства имён – ещё одна функция ядра Linux, обеспечивающая изоляцию процессов. Они позволяют Docker создавать изолированные рабочие области, называемые контейнерами. Пространства имен гарантируют, что процессы внутри контейнера не могут мешать процессам вне контейнера или в хост-системе. Существует несколько типов пространств имен, таких как PID, NET, MNT и USER, каждый из которых отвечает за изоляцию определенного аспекта процесса.

### Пространство имён
### cgroups
### Файловые системы типа Union

## Установка/Настройка

### Docker Desktop (Win/Mac/Linux)
### Docker Engine (Linux)

## Основы Docker

## Сохранение данных

### Эфемерная файловая система контейнера
### Монтирование томов
### Монтирование bindов

## Использование сторонних образов

### Базы данных
### Интерактивные тестовые среды
### Утилиты командной строки

## Создание образов контейнеров

### Dockerfile
### Эффективное кэширование слоев
### Размер образа и настройки безопасности

## Реестры контейнеров
### DockerHub
### Альтернативы DockerHub (ghcr, ecr, gcr, act и т. д.)
### Рекомендации по добавлению тегов к образу

## Запуск контейнеров

### docker run
### docker Compose
### Настройка параметров в момент запуска

## Настройка безопасности контейнера

### Меры безопасности для защиты образа
### Меры безопасности во время выполнения

## Docker CLI

### Образы
### Контейнеры
### Тома
### Сети

## Простота и скорость разработки

### Перезагрузка налету
### Отладчики
### Тесты
### Непрерывная интеграция

## Развертывание контейнеров
### PaaS альтернативы
### Kubernetes
### Docker Swarm
### Nomad

Продолжайте обучение, используя одну из следующих карт, связанных с этой:

[Дорожная карта Backend-разработчика](https://roadmap.sh/backend)

[Дорожная карта DevOps](https://roadmap.sh/devops)



